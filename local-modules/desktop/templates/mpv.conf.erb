# Generated by Puppet

<% if @facts['laptop'] -%>
# See mpv(1) which discourages that, but on battery, it's better to
# save energy.
hwdec=auto
<% end -%>

# By default, font size is quite large (55)
sub-font-size=32
sub-border-size=2

# Save position on quit by default
save-position-on-quit=yes

# Buffer longer if needed
cache-pause-wait=5

# Download some subtitles automatically
ytdl-raw-options=write-sub=,write-auto-sub=
ytdl-raw-options-append=sub-lang=en,fr

# Use cookies from Firefox
ytdl-raw-options-append=cookies-from-browser=firefox

# Limit video quality
ytdl-format=bestvideo[width<=<%= @facts['drm']['card0']['maxwidth'] %>]+bestaudio/best[width<=<%= @facts['drm']['card0']['maxwidth'] %>]/best

# Switch to yt-dlp (available through Nix)
script-opts=ytdl_hook-ytdl_path=<%= @home %>/.nix-profile/bin/yt-dlp
