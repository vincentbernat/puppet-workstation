# Generated by Puppet

<% if @facts['laptop'] -%>
# See mpv(1) which discourages that, but on battery, it's better to
# save energy.
hwdec=auto
<% end -%>

# By default, font size is quite large (55)
sub-font-size=32
sub-border-size=2

# Save position on quit by default
save-position-on-quit=yes

# Buffer longer if needed
cache-pause-wait=5

# Download some subtitles automatically
ytdl-raw-options=write-sub=,write-auto-sub=
ytdl-raw-options-append=sub-lang=en,fr
# Limit video quality
<% if @facts['laptop'] -%>
ytdl-format=bestvideo[width<=2880]+bestaudio/best[width<=2880]
<% else -%>
ytdl-format=bestvideo[width<=3840]+bestaudio/best[width<=3840]
<% end -%>

# Switch to yt-dlp (available through Nix)
script-opts=ytdl_hook-ytdl_path=~/.nix-profile/bin/yt-dlp
